# Copyright 2022 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Master Skaffold
apiVersion: skaffold/v2beta12
kind: Config
metadata:
  name: backends
requires:
- path: ./common
  configs: [common]

- path: ./microservices/lms
  configs: [lms]

- path: ./microservices/lms_admin_ui
  configs: [lms-admin-ui]

- path: ./microservices/lti
  configs: [lti]

- path: ./microservices/llm_service
  configs: [llm-service]

- path: ./microservices/classroom_notification_service
  configs: [classroom-notification-service]

- path: ./microservices/classroom_shim
  configs: [classroom-shim]

- path: ./microservices/classroom_notifications_cronjob
  configs: [classroom-notifications-cronjob]

- path: ./microservices/classroom_code_update_cronjob
  configs: [classroom-code-update-cronjob]

- path: ./microservices/update_invitations_cronjob
  configs: [update-invitations-cronjob]

build:
  googleCloudBuild: {}

---
# Skaffold for LLM Service
apiVersion: skaffold/v2beta12
kind: Config
metadata:
  name: llm_service
requires:
- path: ./common
  configs: [common]

- path: ./microservices/llm_service
  configs: [llm-service]

build:
  googleCloudBuild: {}
